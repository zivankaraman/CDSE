<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Before you start • CDSE</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Before you start">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CDSE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/CDSE.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/BeforeYouStart.html">Before you start</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/zivankaraman/CDSE/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Before you start</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/zivankaraman/CDSE/blob/HEAD/vignettes/BeforeYouStart.Rmd" class="external-link"><code>vignettes/BeforeYouStart.Rmd</code></a></small>
      <div class="d-none name"><code>BeforeYouStart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>CDSE</code> package for R was developed to allow access to
the ‘<a href="https://dataspace.copernicus.eu/" class="external-link">Copernicus Data Space
Ecosystem</a>’ data and services from R. The
<code>'Copernicus Data Space Ecosystem'</code>, deployed in 2023, offers
access to the EO data collection from the Copernicus missions, with
discovery and download capabilities and numerous data processing tools.
In particular, the <a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub.html" class="external-link">‘Sentinel
Hub’ API</a> provides access to the multi-spectral and multi-temporal
big data satellite imagery service, capable of fully automated,
real-time processing and distribution of remote sensing data and related
EO products. Users can use APIs to retrieve satellite data over their
AOI and specific time range from full archives in a matter of seconds.
When working on the application of EO where the area of interest is
relatively small compared to the image tiles distributed by Copernicus
(100 x 100 km), it allows to retrieve just the portion of the image of
interest rather than downloading the huge tile image file and processing
it locally. The goal of the <code>CDSE</code> package is to provide easy
access to this functionality from R.</p>
<p>The main functions allow to search the catalog of available imagery
from the Sentinel-1, Sentinel-2, Sentinel-3, and Sentinel-5 missions,
and to process and download the images of an area of interest and a time
range in various formats. Other functions might be added in subsequent
releases of the package.</p>
</div>
<div class="section level2">
<h2 id="accessing-cdse-data-and-services">Accessing CDSE data and services<a class="anchor" aria-label="anchor" href="#accessing-cdse-data-and-services"></a>
</h2>
<p>Access to the <code>'Copernicus Data Space Ecosystem'</code> is free,
but you have to register to use the API. You can create a free account
as explained in <a href="https://documentation.dataspace.copernicus.eu/Registration.html" class="external-link">User
registration and authentication</a>. The free account has some
limitations and quotas applied to it, but it should be sufficient for
most individual users. The details are provided in <a href="https://documentation.dataspace.copernicus.eu/Quotas.html" class="external-link">Quotas
and Limitations</a>.</p>
</div>
<div class="section level2">
<h2 id="api-authentication">API authentication<a class="anchor" aria-label="anchor" href="#api-authentication"></a>
</h2>
<p>Most of the API functions require a specific authentication. The API
uses OAuth2 Authentication and requires that you have an access token.
In essence, this is a piece of information you add to your requests so
the server knows it’s you. To be able to request a token, you need to
register an OAuth Client in your <a href="https://shapps.dataspace.copernicus.eu/dashboard/#/account/settings" class="external-link">account
settings</a>. Here you will obtain your client credentials - client id
and client secret. You will use these client credentials to authenticate
with the API. <strong>Make sure to copy your personal OAuth secret, as
you will not be able to see it again!</strong> You can find more details
on the documentation page dedicated to <a href="https://documentation.dataspace.copernicus.eu/APIs/SentinelHub/Overview/Authentication.html" class="external-link">API
authentication</a>.</p>
</div>
<div class="section level2">
<h2 id="storing-client-credentials">Storing client credentials<a class="anchor" aria-label="anchor" href="#storing-client-credentials"></a>
</h2>
<p>You should store your client credentials securely. Do not hard-code
them (include as clear text) in scripts, particularly in the scripts
shared with others. Don’t save them to a repository (like Git) or to a
shared folder.<br>
You can of course provide the credentials every time they are needed,
but this is a very cumbersome approach.<br>
A simple way to keep them persistently available is to store them as
system environment variables. This can be achieved by defining them in
your personal or project-level <code>.Renviron</code> file. We recommend
this method for its simplicity and use it in our examples. You could
also set the environment variables with <code><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv()</a></code>, but
you should note that is not persistent; the values are lost when the R
session terminates. Another option is to store them in the global
<code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code>, typically in your personal
<code>.Rprofile</code>. These two options require the name-value pairs,
for example, <code>CDSE_ID = "yourid"</code> and
<code>CDSE_SECRET = "yoursecret"</code>. You can find more information
about dealing with sensitive information in R at <a href="https://cran.r-project.org/web/packages/httr/vignettes/secrets.html" class="external-link">Managing
secrets</a>.</p>
</div>
<div class="section level2">
<h2 id="oauth-authentication-client">OAuth authentication client<a class="anchor" aria-label="anchor" href="#oauth-authentication-client"></a>
</h2>
<p>The recommended way to authenticate with the CDSE API is to use the
<code>httr2_oauth_client</code> object (from the <code>httr2</code>
package) returned by the <code>GetOAuthClient</code> function, as shown
below. You have to provide your client credentials as arguments to the
function. The returned object should be passed as the
<code>client</code> argument to the functions requiring the
authentication. The underlying services in the <code>httr2</code>
package will automatically take care of the authentication lifecycle
management (refreshing token, etc.).</p>
<p><em>The credentials have been obfuscated in the output.</em></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CDSE_ID"</span><span class="op">)</span></span>
<span><span class="va">secret</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CDSE_SECRET"</span><span class="op">)</span></span>
<span><span class="va">OAuthClient</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/GetOAuthClient.html">GetOAuthClient</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">id</span>, secret <span class="op">=</span> <span class="va">secret</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">OAuthClient</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "httr2_oauth_client"</span></span>
<span><span class="va">OAuthClient</span></span>
<span><span class="co">#&gt; &lt;httr2_oauth_client&gt;</span></span>
<span><span class="co">#&gt; name: x9x99xx99x9xx99xx99xx9xx99x99x99</span></span>
<span><span class="co">#&gt; id: xx-9x999x9x-9999-999x-xxxx-x9999x99x99x</span></span>
<span><span class="co">#&gt; secret: &lt;REDACTED&gt;</span></span>
<span><span class="co">#&gt; token_url: https://identity.dataspace.copernicus.eu/auth/realms/CDSE/protocol/openid-connect/token</span></span>
<span><span class="co">#&gt; auth: oauth_client_req_auth_header</span></span></code></pre></div>
<p>However, it should be noted that the object returned by the
<code>GetOAuthClient</code> function has not been validated against the
backend. The credentials provided will only be checked the first time
this object is used in a query. Therefore, even if the
<code>GetOAuthClient</code> function does not raise an error you cannot
assume that your credentials have been accepted by the backend. To
demonstrate it, you can provide a dummy id, secret, and URL, and no
error will be raised at this stage.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="st">"my_dummy_id"</span></span>
<span><span class="va">secret</span> <span class="op">&lt;-</span> <span class="st">"my_dummy_secret"</span></span>
<span><span class="va">OAuthClient</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/GetOAuthClient.html">GetOAuthClient</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">id</span>, secret <span class="op">=</span> <span class="va">secret</span>, url <span class="op">=</span> <span class="st">"https://my_dummy_url.org"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">OAuthClient</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "httr2_oauth_client"</span></span>
<span><span class="va">OAuthClient</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">&lt;httr2_oauth_client&gt;</span></span></span>
<span><span class="co">#&gt; name: a43e08ed613f62d6ca1af36d4230ccf6</span></span>
<span><span class="co">#&gt; id: my_dummy_id</span></span>
<span><span class="co">#&gt; secret: <span style="color: #555555;">&lt;REDACTED&gt;</span></span></span>
<span><span class="co">#&gt; token_url: https://my_dummy_url.org</span></span>
<span><span class="co">#&gt; auth: oauth_client_req_auth_header</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="oauth-authentication-token">OAuth authentication token<a class="anchor" aria-label="anchor" href="#oauth-authentication-token"></a>
</h2>
<p>In order to be able to check immediately if your credentials work
correctly, we have provided another authentication function called
<code>GetOAuthToken</code>. It takes the same arguments as the above
mentioned <code>GetOAuthClient</code> function, but it verifies the
credentials immediately. If successful, it returns a connection token,
(very long) string that can be be passed as the <code>token</code>
argument to the functions requiring the authentication. If your
credentials have been refused by the backend, an error is raised. Please
not that in this case you must explicitly take care yourself of the
token lifecycle management. We therefore recommend that you use this
function only to test that your credentials work, but to prefer passing
the object returned by the <code>GetOAuthClient</code> as the
<code>client</code> argument to the functions from the <code>CDSE</code>
package that require authentication.</p>
<p><em>The token has been obfuscated and shortened in the
output.</em></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CDSE_ID"</span><span class="op">)</span></span>
<span><span class="va">secret</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"CDSE_SECRET"</span><span class="op">)</span></span>
<span><span class="va">OAuthToken</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/GetOAuthToken.html">GetOAuthToken</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">id</span>, secret <span class="op">=</span> <span class="va">secret</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">OAuthToken</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "character"</span></span>
<span><span class="va">OAuthToken</span></span>
<span><span class="co">#&gt; [1] "xxXxxXxxXxXXXxX9XxXxXxX9xXXxXxXxxXXxxxx9xxXxX9XXXXx9X9xXxX9XxXXXxxX9xXXXxx......"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="note-for-windows-users">Note for Windows users<a class="anchor" aria-label="anchor" href="#note-for-windows-users"></a>
</h2>
<p>On some Windows systems, depending on the network and security
settings, the things might not work out of the box. If you get an error
while connecting to the CDSE API complaining about SSL/TLS handshake
problem, try setting the environment variable
<code>CURL_SSL_BACKEND</code> to <code>openssl</code>
<strong>before</strong> using the functions from the <code>CDSE</code>
package. You can restart R session, and type
<code>Sys.setenv(CURL_SSL_BACKEND = "openssl")</code> before using the
<code>CDSE</code> package. Even better, you can permanently set this
environment variable in your <code>.Renviron</code> file (by adding the
line <code>CURL_SSL_BACKEND = "openssl"</code>) or setting it in your
Windows system settings environment variables.</p>
<p>You can find more information about this issue <a href="https://cran.r-project.org/web/packages/curl/vignettes/windows.html" class="external-link">here</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zivan Karaman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
